<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Chi tiết sinh viên</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>
</head>
<body class="bg-gray-50">

<div class="flex min-h-screen">

  <!-- Sidebar -->
  <aside class="w-72 bg-white shadow-md border-r">
    <div class="p-6 border-b">
      <h2 class="text-base font-semibold text-gray-800">
        Xin chào<br>
        <span class="text-blue-600">ThS. Nguyễn Văn A</span>
      </h2>
    </div>
    <nav class="p-4 space-y-2 text-gray-700 text-sm">
      <button class="flex items-center gap-2 w-full p-2 rounded hover:text-blue-600">
        <i class="ph ph-house text-lg"></i> Dashboard
      </button>

      <details class="group">
        <summary class="flex items-center gap-2 w-full p-2 rounded hover:text-blue-600 cursor-pointer">
          <i class="ph ph-user-circle text-lg"></i> Giảng viên
        </summary>
        <div class="ml-6 mt-1 space-y-1">
          <button class="block w-full p-2 rounded hover:bg-gray-100">Khai báo thông tin chung</button>
          <button class="block w-full p-2 rounded hover:bg-gray-100">Khai báo hướng nghiên cứu</button>
        </div>
      </details>

      <details open class="group">
        <summary class="flex items-center gap-2 w-full p-2 rounded text-blue-600 font-semibold cursor-pointer">
          <i class="ph ph-chalkboard-teacher text-lg"></i> Giảng viên HD
        </summary>
        <div class="ml-6 mt-1 space-y-1">
          <button class="block w-full text-left p-2 rounded hover:bg-gray-100">Tiếp nhận sinh viên hướng dẫn</button>
          <button class="block w-full text-left p-2 rounded bg-blue-100 font-medium text-blue-700">Quản lý SV hướng dẫn</button>
        </div>
      </details>

      <details class="group">
        <summary class="flex items-center gap-2 w-full p-2 rounded hover:text-blue-600 cursor-pointer">
          <i class="ph ph-users-three text-lg"></i> Trưởng bộ môn
        </summary>
        <div class="ml-6 mt-1 space-y-1">
          <button class="block w-full p-2 rounded hover:bg-gray-100">Phân công GVHD</button>
          <button class="block w-full p-2 rounded hover:bg-gray-100">Phân công phản biện</button>
          <button class="block w-full p-2 rounded hover:bg-gray-100">Xét duyệt đề cương</button>
        </div>
      </details>

      <details class="group">
        <summary class="flex items-center gap-2 w-full p-2 rounded hover:text-blue-600 cursor-pointer">
          <i class="ph ph-clipboard-text text-lg"></i> GV phản biện
        </summary>
        <div class="ml-6 mt-1 space-y-1">
          <button class="block w-full p-2 rounded hover:bg-gray-100">Xem và phản biện đề cương</button>
        </div>
      </details>

      <details class="group">
        <summary class="flex items-center gap-2 w-full p-2 rounded hover:text-blue-600 cursor-pointer">
          <i class="ph ph-file-text text-lg"></i> Thư ký
        </summary>
        <div class="ml-6 mt-1 space-y-1">
          <button class="block w-full p-2 rounded hover:bg-gray-100">Lập biên bản</button>
          <button class="block w-full p-2 rounded hover:bg-gray-100">Cập nhật điểm</button>
        </div>
      </details>

      <details class="group">
        <summary class="flex items-center gap-2 w-full p-2 rounded hover:text-blue-600 cursor-pointer">
          <i class="ph ph-users text-lg"></i> Hội đồng
        </summary>
        <div class="ml-6 mt-1 space-y-1">
          <button class="block w-full p-2 rounded hover:bg-gray-100">Danh sách sinh viên bảo vệ</button>
          <button class="block w-full p-2 rounded hover:bg-gray-100">Chấm điểm bảo vệ</button>
        </div>
      </details>

      <details class="group">
        <summary class="flex items-center gap-2 w-full p-2 rounded hover:text-blue-600 cursor-pointer">
          <i class="ph ph-shield-check text-lg"></i> Giám sát
        </summary>
        <div class="ml-6 mt-1 space-y-1">
          <button class="block w-full p-2 rounded hover:bg-gray-100">Theo dõi toàn bộ quá trình</button>
        </div>
      </details>
    </nav>
  </aside>

  <!-- Nội dung chi tiết sinh viên -->
  <main class="flex-1 p-6 space-y-8 overflow-auto">

    <!-- TOÀN BỘ PHẦN CHI TIẾT SINH VIÊN DÁN TẠI ĐÂY -->
    <!-- Bạn có thể chèn phần nội dung chi tiết sinh viên hiện tại mà bạn đã có ở đây. -->
    <!-- Đã được bạn gửi từ phần trước (thông tin sinh viên, các bảng đề cương, báo cáo, bảo vệ...). -->

    <!-- Thông tin sinh viên -->
<!-- Chi tiết báo cáo tuần/giai đoạn -->
<div id="weekly-report-detail" class="bg-white p-6 rounded shadow">
  <div class="flex items-start justify-between gap-4">
    <div>
      <h3 class="text-lg font-semibold text-blue-600">Chi tiết báo cáo tuần / giai đoạn</h3>
      <p class="text-sm text-gray-500 mt-1">Thông tin chi tiết công việc, mốc thời gian, file đính kèm và nhận xét.</p>
    </div>

    <!-- Trạng thái & Lưu -->
    <div class="flex items-center gap-3">
      <label for="reportStatus" class="sr-only">Trạng thái</label>
      <select id="reportStatus" class="border rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-200">
        <option value="pending">-- Chọn trạng thái --</option>
        <option value="passed">Đạt</option>
        <option value="failed">Chưa đạt</option>
        <option value="revision">Cần chỉnh sửa</option>
      </select>

      <button id="saveReportBtn" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm shadow">
        Lưu báo cáo
      </button>
    </div>
  </div>

  <hr class="my-4" />

  <!-- Form thông tin báo cáo -->
  <form id="reportForm" class="space-y-4">
    <!-- Tiêu đề -->
    <div>
      <label for="taskTitle" class="block text-sm text-gray-600">Tiêu đề công việc</label>
      <input id="taskTitle" type="text" placeholder="Nhập tiêu đề công việc..." class="mt-1 w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200" value="Khảo sát đề tài"/>
    </div>

    <!-- Mô tả -->
    <div>
      <label for="taskDesc" class="block text-sm text-gray-600">Mô tả công việc</label>
      <textarea id="taskDesc" rows="4" placeholder="Mô tả chi tiết công việc..." class="mt-1 w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200">Thực hiện khảo sát tài liệu, xác định yêu cầu, lập dàn ý đề cương.</textarea>
    </div>

    <!-- Ngày bắt đầu / kết thúc -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label for="startDate" class="block text-sm text-gray-600">Ngày bắt đầu</label>
        <input id="startDate" type="date" class="mt-1 w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200" value="2025-09-01"/>
      </div>
      <div>
        <label for="endDate" class="block text-sm text-gray-600">Ngày kết thúc</label>
        <input id="endDate" type="date" class="mt-1 w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200" value="2025-09-07"/>
      </div>
    </div>

    <!-- File đính kèm -->
<!-- Danh sách file sinh viên đã nộp -->
<div>
  <label class="block text-sm text-gray-600">Tệp sinh viên đã nộp</label>
  <ul id="attachmentsList" class="mt-3 space-y-2 text-sm">
    <!-- render từ API -->
    <li class="flex items-center justify-between gap-3 p-2 border rounded">
      <div class="flex items-center gap-3">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h10v10H7z"/>
        </svg>
        <a href="/uploads/baocao_tuan1.pdf" target="_blank" class="text-blue-600 hover:underline">
          baocao_tuan1.pdf
        </a>
      </div>
      <span class="text-xs text-gray-500">200 KB</span>
    </li>
  </ul>
</div>


    <!-- Nhận xét: thêm mới + danh sách nhận xét -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
      <!-- Left: form thêm nhận xét -->
      <div class="lg:col-span-2 space-y-3">
        <label for="newComment" class="block text-sm text-gray-600">Thêm nhận xét</label>
        <textarea id="newComment" rows="4" placeholder="Viết nhận xét..." class="w-full border rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-200"></textarea>

        <div class="flex items-center gap-3">
          <button id="sendCommentBtn" type="button" class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm">Gửi nhận xét</button>
          <button id="cancelCommentBtn" type="button" class="px-3 py-2 border rounded text-sm hover:bg-gray-50">Hủy</button>
          <span id="commentInfo" class="text-sm text-gray-500">Bạn đang bình luận với tư cách <span class="font-medium">TS. Trần Thị B</span></span>
        </div>
      </div>

      <!-- Right: danh sách nhận xét hiện tại -->
      <div class="space-y-3">
        <h4 class="text-sm font-medium text-gray-700">Nhận xét đã ghi</h4>

        <div id="commentsList" class="space-y-3 max-h-56 overflow-auto pr-2">
          <!-- comment item -->
          <div class="p-3 border rounded">
            <div class="flex items-start justify-between gap-3">
              <div>
                <div class="text-sm font-medium text-gray-800">TS. Trần Thị B <span class="text-xs text-gray-500 font-normal">— 02/09/2025 10:30</span></div>
                <div class="text-sm text-gray-700 mt-1">Cần bổ sung phần phân tích cơ sở lý thuyết, và mở rộng phần tham khảo.</div>
              </div>
              <div class="text-right">
                <button class="text-xs text-blue-600 hover:underline">Sửa</button>
                <button class="text-xs text-red-500 hover:underline block mt-1">Xóa</button>
              </div>
            </div>
          </div>

          <div class="p-3 border rounded">
            <div class="text-sm font-medium text-gray-800">GVHD: P. Nguyễn <span class="text-xs text-gray-500 font-normal">— 28/08/2025 14:12</span></div>
            <div class="text-sm text-gray-700 mt-1">Hoàn thành tốt phần thiết kế database, cần bổ sung UML use-case.</div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>

<!-- Optional: script nhỏ để mô phỏng tương tác upload & gửi comment (client only) -->
  <script>
  // Demo: thêm file mẫu vào danh sách khi chọn file
// Giả sử API trả về:
const files = [
  { name: 'baocao_tuan1.pdf', size: 200, url: '/uploads/baocao_tuan1.pdf' },
  { name: 'diagram.png', size: 350, url: '/uploads/diagram.png' }
];

const attachmentsList = document.getElementById('attachmentsList');
attachmentsList.innerHTML = ''; // clear cũ

files.forEach(file => {
  const li = document.createElement('li');
  li.className = 'flex items-center justify-between gap-3 p-2 border rounded';
  li.innerHTML = `
    <div class="flex items-center gap-3">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h10v10H7z"/>
      </svg>
      <a href="${file.url}" target="_blank" class="text-blue-600 hover:underline">${file.name}</a>
    </div>
    <span class="text-xs text-gray-500">${file.size} KB</span>
  `;
  attachmentsList.appendChild(li);
});
</script>
  </main>

</div>

</body>
</html>
