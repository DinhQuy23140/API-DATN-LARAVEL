<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quản lý tài khoản</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex min-h-screen bg-gray-100">

  <!-- Sidebar -->
  <aside class="w-64 bg-white shadow-md">
    <div class="p-4 text-xl font-bold text-blue-600">Quản trị hệ thống</div>
    <nav class="mt-6">
      <ul class="space-y-2 px-4">
        <li><a href="#" class="block px-2 py-2 rounded hover:bg-blue-100">Dashboard</a></li>
        <li><a href="#" class="block px-2 py-2 rounded hover:bg-blue-100">Danh sách Khoa</a></li>
        <li><a href="#" class="block px-2 py-2 rounded hover:bg-blue-100">Danh sách Ngành</a></li>
        <li><a href="#" class="block px-2 py-2 rounded hover:bg-blue-100">Danh sách Bộ môn</a></li>
        <li class="mt-4"><a href="#" class="block px-2 py-2 bg-blue-200 rounded font-semibold">Quản lý tài khoản</a></li>
        <li><a href="#" class="block px-2 py-2 rounded hover:bg-blue-100">Phân quyền người dùng</a></li>
        <li><a href="#" class="block px-2 py-2 rounded hover:bg-blue-100">Tài khoản Trợ lý Khoa</a></li>
        <li class="mt-4"><a href="#" class="block px-2 py-2 rounded hover:bg-red-100 text-red-600">Đăng xuất</a></li>
      </ul>
    </nav>
  </aside>

  <!-- Main Content -->
  <main class="flex-1 p-8">
    <div class="flex justify-between items-center mb-6 relative">
      <h1 class="text-2xl font-bold">Quản lý tài khoản</h1>

      <!-- Nút + Menu tạo tài khoản -->
      <div class="relative inline-block text-left">
        <button id="toggleDropdown" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
          + Tạo tài khoản
        </button>

        <!-- Dropdown menu -->
        <div id="accountTypeDropdown" class="hidden absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded shadow z-10">
          <ul class="text-gray-700">
            <li><button class="w-full text-left px-4 py-2 hover:bg-gray-100">Quản trị viên</button></li>
            <li><button class="w-full text-left px-4 py-2 hover:bg-gray-100">Giảng viên</button></li>
            <li><button class="w-full text-left px-4 py-2 hover:bg-gray-100">Sinh viên</button></li>
            <li><button class="w-full text-left px-4 py-2 hover:bg-gray-100">Thư ký khoa</button></li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Tìm kiếm -->
    <div class="mb-4">
      <label for="searchInput" class="block mb-1 text-gray-700 font-medium">Tìm theo tên hoặc email:</label>
      <input id="searchInput" type="text" placeholder="Nhập tên hoặc email..." class="w-full sm:w-72 p-2 border border-gray-300 rounded" />
    </div>

    <!-- Bảng Tài khoản -->
    <div class="bg-white rounded shadow p-4 overflow-x-auto">
      <table class="w-full text-left border-collapse">
        <thead>
          <tr class="bg-gray-100 text-gray-700">
            <th class="p-3 border-b">Tên</th>
            <th class="p-3 border-b">Email</th>
            <th class="p-3 border-b">Số điện thoại</th>
            <th class="p-3 border-b">Vai trò</th>
            <th class="p-3 border-b">Thao tác</th>
          </tr>
        </thead>
        <tbody id="userTable">
          <!-- Dữ liệu JS sinh ra -->
        </tbody>
      </table>
    </div>

    <!-- Form tạo tài khoản -->
<div id="accountFormWrapper" class="mt-8 hidden">
  <!-- Giảng viên -->
  <form id="form-giangvien" class="bg-white p-6 rounded shadow space-y-4 hidden">
    <h2 class="text-xl font-bold mb-4">Tạo tài khoản Giảng viên</h2>
    <input type="text" placeholder="Họ và tên" class="w-full p-2 border rounded" />
    <input type="email" placeholder="Email" class="w-full p-2 border rounded" />
    <input type="text" placeholder="Mã giảng viên" class="w-full p-2 border rounded" />
    <input type="password" placeholder="Mật khẩu" class="w-full p-2 border rounded" />
    <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Tạo</button>
  </form>

  <!-- Sinh viên -->
  <form id="form-sinhvien" class="bg-white p-6 rounded shadow space-y-4 hidden">
    <h2 class="text-xl font-bold mb-4">Tạo tài khoản Sinh viên</h2>
    <input type="text" placeholder="Họ và tên" class="w-full p-2 border rounded" />
    <input type="email" placeholder="Email" class="w-full p-2 border rounded" />
    <input type="text" placeholder="Mã sinh viên" class="w-full p-2 border rounded" />
    <input type="text" placeholder="Ngành học" class="w-full p-2 border rounded" />
    <input type="password" placeholder="Mật khẩu" class="w-full p-2 border rounded" />
    <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Tạo</button>
  </form>

  <!-- Thư ký -->
  <form id="form-thuky" class="bg-white p-6 rounded shadow space-y-4 hidden">
    <h2 class="text-xl font-bold mb-4">Tạo tài khoản Thư ký khoa</h2>
    <input type="text" placeholder="Họ và tên" class="w-full p-2 border rounded" />
    <input type="email" placeholder="Email" class="w-full p-2 border rounded" />
    <input type="text" placeholder="Mã thư ký" class="w-full p-2 border rounded" />
    <input type="password" placeholder="Mật khẩu" class="w-full p-2 border rounded" />
    <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Tạo</button>
  </form>

  <!-- Quản trị viên -->
  <form id="form-quantri" class="bg-white p-6 rounded shadow space-y-4 hidden">
    <h2 class="text-xl font-bold mb-4">Tạo tài khoản Quản trị viên</h2>
    <input type="text" placeholder="Họ và tên" class="w-full p-2 border rounded" />
    <input type="email" placeholder="Email" class="w-full p-2 border rounded" />
    <input type="text" placeholder="Mã quản trị" class="w-full p-2 border rounded" />
    <input type="password" placeholder="Mật khẩu" class="w-full p-2 border rounded" />
    <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Tạo</button>
  </form>
</div>

  </main>

  <!-- JavaScript -->
<script>
  const users = [
    { ten: 'Nguyễn Văn A', email: 'vana@example.com', phone: '0912345678', role: 'Sinh viên' },
    { ten: 'Trần Thị B', email: 'thib@example.com', phone: '0987654321', role: 'Giảng viên' },
    { ten: 'Lê Văn C', email: 'vanc@example.com', phone: '0971122334', role: 'Quản trị viên' },
    { ten: 'Phạm Minh D', email: 'minhd@example.com', phone: '0934567890', role: 'Sinh viên' }
  ];

  const tableBody = document.getElementById('userTable');
  const searchInput = document.getElementById('searchInput');

  function renderTable(keyword) {
    tableBody.innerHTML = '';
    const filtered = users.filter(u =>
      u.ten.toLowerCase().includes(keyword.toLowerCase()) ||
      u.email.toLowerCase().includes(keyword.toLowerCase())
    );

    if (filtered.length === 0) {
      tableBody.innerHTML = `<tr><td colspan="5" class="p-4 text-center text-gray-500">Không tìm thấy tài khoản phù hợp.</td></tr>`;
      return;
    }

    filtered.forEach(u => {
      tableBody.innerHTML += `
        <tr class="hover:bg-gray-50">
          <td class="p-3 border-b">${u.ten}</td>
          <td class="p-3 border-b">${u.email}</td>
          <td class="p-3 border-b">${u.phone}</td>
          <td class="p-3 border-b">${u.role}</td>
          <td class="p-3 border-b space-x-2">
            <button class="text-blue-600 hover:underline">Sửa</button>
            <button class="text-red-600 hover:underline">Xóa</button>
          </td>
        </tr>`;
    });
  }

  searchInput.addEventListener('input', () => {
    renderTable(searchInput.value);
  });

  renderTable('');

  // Dropdown toggle logic
  const toggleButton = document.getElementById("toggleDropdown");
  const dropdownMenu = document.getElementById("accountTypeDropdown");

  toggleButton.addEventListener("click", (e) => {
    e.stopPropagation();
    dropdownMenu.classList.toggle("hidden");
  });

  document.addEventListener("click", (e) => {
    if (!dropdownMenu.contains(e.target) && e.target !== toggleButton) {
      dropdownMenu.classList.add("hidden");
    }
  });

  // Gắn sự kiện hiển thị form theo loại tài khoản
  const accountFormWrapper = document.getElementById("accountFormWrapper");
  const forms = {
    "Quản trị viên": document.getElementById("form-quantri"),
    "Giảng viên": document.getElementById("form-giangvien"),
    "Sinh viên": document.getElementById("form-sinhvien"),
    "Thư ký khoa": document.getElementById("form-thuky"),
  };

  dropdownMenu.querySelectorAll("button").forEach(btn => {
    btn.addEventListener("click", () => {
      const type = btn.textContent.trim();

      // Ẩn tất cả form
      Object.values(forms).forEach(f => f.classList.add("hidden"));

      // Hiện form tương ứng
      if (forms[type]) {
        accountFormWrapper.classList.remove("hidden");
        forms[type].classList.remove("hidden");
      }

      // Ẩn dropdown
      dropdownMenu.classList.add("hidden");
    });
  });
</script>

</body>
</html>
