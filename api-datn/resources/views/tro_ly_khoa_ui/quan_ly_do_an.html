<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Thống kê - Báo cáo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    function toggleDetails(id, title) {
      const detailIds = ["detail1", "detail2", "detail3", "detail4"];
      detailIds.forEach(d => {
        document.getElementById(d).classList.add("hidden");
      });
      document.getElementById(id).classList.remove("hidden");
      document.getElementById("section-title").textContent = title;
    }
  </script>
</head>
<div class="flex min-h-screen bg-gray-100">
  <!-- Sidebar -->
    <aside class="w-64 bg-white shadow-lg fixed h-full">
      <div class="p-6 font-bold text-xl text-blue-600 border-b">
        <div>Trợ lý khoa</div>
        <div>Khoa công nghệ thông tin</div>
      </div>
      <nav class="p-4 space-y-2 text-sm">
        <a href="#" class="block px-3 py-2 rounded hover:bg-gray-200">📊 Dashboard</a>
        <a href="#" class="block px-3 py-2 rounded hover:bg-gray-200">📅 Quản lý đợt đồ án</a>
        <a href="#" class="block px-3 py-2 rounded hover:bg-gray-200">📥 DS SV đủ điều kiện</a>
        <a href="#" class="block px-3 py-2 rounded hover:bg-gray-200">🏢 Quản lý bộ môn</a>
        <a href="#" class="block px-3 py-2 rounded hover:bg-gray-200">🎓 Quản lý ngành</a>
        <a href="#" class="block px-3 py-2 rounded hover:bg-gray-200">👨‍🏫 Quản lý cán bộ - giảng viên</a>
        <a href="#" class="block px-3 py-2 rounded hover:bg-gray-200">📈 Thống kê – Báo cáo</a>
        <a href="#" class="block px-3 py-2 rounded hover:bg-gray-200 bg-blue-200 font-semibold">📚 Quản lý đề tài đồ án</a>
      </nav>
    </aside>

  <!-- Main content -->
  <main class="ml-64 p-6 w-full">
    <h1 class="text-2xl font-bold text-gray-800 mb-4">Quản lý đồ án</h1>

    <!-- Bộ lọc -->
    <div class="bg-white p-4 rounded shadow mb-6 grid grid-cols-1 md:grid-cols-4 gap-4">
      <input type="text" placeholder="Tìm theo tên đồ án..." class="border px-3 py-2 rounded w-full" />
      <select class="border px-3 py-2 rounded w-full">
        <option>Tất cả khoa</option>
        <option>CNTT</option>
        <option>HTTT</option>
        <option>CNPM</option>
      </select>
      <select class="border px-3 py-2 rounded w-full">
        <option>Tất cả ngành</option>
        <option>Kỹ thuật phần mềm</option>
        <option>Hệ thống thông tin</option>
      </select>
      <button class="bg-blue-600 text-white px-4 py-2 rounded">Lọc</button>
    </div>

    <!-- Nút thêm đồ án -->
    <div class="flex justify-end mb-4">
      <button class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">+ Thêm đồ án</button>
    </div>

    <!-- Bảng danh sách đồ án -->
    <div class="bg-white rounded shadow overflow-auto">
      <table class="min-w-full text-sm text-left border">
        <thead class="bg-gray-100">
          <tr>
            <th class="p-3 border-b">#</th>
            <th class="p-3 border-b">Tên đồ án</th>
            <th class="p-3 border-b">Sinh viên</th>
            <th class="p-3 border-b">Giảng viên hướng dẫn</th>
            <th class="p-3 border-b">Trạng thái</th>
            <th class="p-3 border-b text-center">Hành động</th>
          </tr>
        </thead>
        <tbody>
          <tr class="hover:bg-gray-50">
            <td class="p-3 border-b">1</td>
            <td class="p-3 border-b">Ứng dụng quản lý thiết bị</td>
            <td class="p-3 border-b">Nguyễn Văn A</td>
            <td class="p-3 border-b">TS. Trần Thị B</td>
            <td class="p-3 border-b">
              <span class="text-sm px-2 py-1 rounded-full bg-yellow-100 text-yellow-800">Đang thực hiện</span>
            </td>
            <td class="p-3 border-b text-center space-x-2">
              <button onclick="openEditModal()" class="text-blue-600 hover:underline">Sửa</button>
              <button class="text-red-600 hover:underline">Xoá</button>
            </td>
          </tr>
          <!-- Thêm các hàng khác tương tự -->
        </tbody>
      </table>
    </div>

<!-- Modal sửa đồ án -->
<div id="editProjectModal" class="fixed inset-0 bg-black bg-opacity-40 hidden items-center justify-center z-50">
  <div class="bg-white rounded-xl shadow-2xl w-full max-w-4xl p-4 relative animate-fade-in transition-all duration-300 ease-out max-h-[85vh] overflow-y-auto">
    <!-- Tiêu đề -->
    <div class="flex justify-between items-center border-b pb-3 mb-5">
      <h2 class="text-2xl font-bold text-gray-800 flex items-center gap-2">
        ✏️ Sửa thông tin đồ án
      </h2>
      <button onclick="closeEditModal()" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
    </div>

    <!-- Form -->
    <form id="editProjectForm" class="space-y-5">
      <!-- Tên đồ án -->
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-1">Tên đồ án</label>
        <input type="text" id="editProjectName" class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring focus:ring-blue-200" placeholder="Nhập tên đồ án" />
      </div>

      <!-- Sinh viên -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">Tên sinh viên</label>
          <input type="text" id="editStudentName" class="w-full border border-gray-300 rounded-lg px-4 py-2" placeholder="Nguyễn Văn A" />
        </div>
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">Mã số sinh viên</label>
          <input type="text" id="editStudentId" class="w-full border border-gray-300 rounded-lg px-4 py-2" placeholder="2112345" />
        </div>
      </div>

      <!-- Ngành - Khoa -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">Ngành</label>
          <select id="editMajor" class="w-full border border-gray-300 rounded-lg px-4 py-2">
            <option>Kỹ thuật phần mềm</option>
            <option>Hệ thống thông tin</option>
            <option>Khoa học máy tính</option>
          </select>
        </div>
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">Khoa</label>
          <select id="editFaculty" class="w-full border border-gray-300 rounded-lg px-4 py-2">
            <option>Công nghệ thông tin</option>
            <option>Điện tử - Viễn thông</option>
            <option>Kinh tế số</option>
          </select>
        </div>
      </div>

      <!-- Giảng viên hướng dẫn -->
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-2">Giảng viên hướng dẫn</label>
        <div class="relative">
          <input type="text" id="editTeacherInput" placeholder="Nhập tên giảng viên..." class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring focus:ring-blue-200" />
          <ul id="editTeacherSuggestions" class="absolute w-full bg-white border border-gray-200 rounded-md mt-1 shadow-lg max-h-40 overflow-y-auto hidden z-10"></ul>
        </div>
        <div id="editSelectedTeachers" class="flex flex-wrap gap-2 mt-3"></div>
      </div>

      <!-- Mô tả -->
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-1">Mô tả đề tài</label>
        <textarea id="editDescription" class="w-full border border-gray-300 rounded-lg px-4 py-2" rows="3" placeholder="Mô tả ngắn gọn..."></textarea>
      </div>

      <!-- Trạng thái -->
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-1">Trạng thái</label>
        <select id="editStatus" class="w-full border border-gray-300 rounded-lg px-4 py-2">
          <option>Chưa bắt đầu</option>
          <option>Đang thực hiện</option>
          <option>Hoàn thành</option>
        </select>
      </div>

      <!-- Action buttons -->
      <div class="flex justify-end gap-3 pt-4 border-t pt-4">
        <button type="button" onclick="closeEditModal()" class="px-4 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200">
          Huỷ
        </button>
        <button type="submit" class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700">
          💾 Lưu thay đổi
        </button>
      </div>
    </form>
  </div>
</div>


<script>  
const editModal = document.getElementById("editProjectModal");
const editTeachers = new Set();

function openEditModal() {
  editTeachers.clear();
  renderEditTeachers();
  editModal.classList.remove("hidden");
  editModal.classList.add("flex");
}

function closeEditModal() {
  editModal.classList.add("hidden");
  editModal.classList.remove("flex");
}

const allLecturers = ["TS. Trần Thị B", "ThS. Nguyễn Văn C", "PGS. Lê Thị D"];

document.getElementById("editTeacherInput").addEventListener("input", function () {
  const keyword = this.value.trim().toLowerCase();
  const suggestionBox = document.getElementById("editTeacherSuggestions");
  suggestionBox.innerHTML = "";

  if (!keyword) return suggestionBox.classList.add("hidden");

  const matches = allLecturers.filter(name => name.toLowerCase().includes(keyword));
  if (matches.length === 0) {
    suggestionBox.classList.add("hidden");
    return;
  }

  matches.forEach(name => {
    const li = document.createElement("li");
    li.textContent = name;
    li.className = "px-4 py-2 hover:bg-blue-100 cursor-pointer";
    li.onclick = () => {
      if (!editTeachers.has(name)) {
        editTeachers.add(name);
        renderEditTeachers();
      }
      document.getElementById("editTeacherInput").value = "";
      suggestionBox.classList.add("hidden");
    };
    suggestionBox.appendChild(li);
  });

  suggestionBox.classList.remove("hidden");
});

function renderEditTeachers() {
  const container = document.getElementById("editSelectedTeachers");
  container.innerHTML = "";
  editTeachers.forEach(name => {
    const tag = document.createElement("div");
    tag.className = "bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm flex items-center gap-2";
    tag.innerHTML = `
      ${name}
      <button onclick="removeEditTeacher('${name}')" class="text-red-600 font-bold">&times;</button>
    `;
    container.appendChild(tag);
  });
}

function removeEditTeacher(name) {
  editTeachers.delete(name);
  renderEditTeachers();
}

document.getElementById("editProjectForm").addEventListener("submit", (e) => {
  e.preventDefault();
  alert("✅ Đã lưu thông tin đồ án!");
  closeEditModal();
});

</script>



<!-- Modal thêm đồ án -->
<div id="addProjectModal" class="fixed inset-0 bg-black bg-opacity-40 hidden items-center justify-center z-50">
  <div class="bg-white rounded-2xl shadow-xl w-full max-w-2xl p-6 relative animate-fade-in">
    <!-- Tiêu đề -->
    <div class="flex justify-between items-center border-b pb-3 mb-4">
      <h2 class="text-2xl font-semibold text-gray-800">Thêm đồ án mới</h2>
      <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
    </div>

    <!-- Form -->
    <form id="addProjectForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <!-- Tên đồ án -->
      <div class="col-span-full">
        <label class="block text-sm font-medium text-gray-700 mb-1">Tên đồ án</label>
        <input type="text" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring focus:ring-blue-500" required />
      </div>

      <!-- Tên sinh viên -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Tên sinh viên</label>
        <input type="text" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring focus:ring-blue-500" required />
      </div>

      <!-- Mã số sinh viên -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Mã số sinh viên</label>
        <input type="text" class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring focus:ring-blue-500" required />
      </div>

      <!-- Ngành -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Ngành</label>
        <select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring focus:ring-blue-500">
          <option>Kỹ thuật phần mềm</option>
          <option>Hệ thống thông tin</option>
          <option>Khoa học máy tính</option>
        </select>
      </div>

      <!-- Khoa -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1">Khoa</label>
        <select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring focus:ring-blue-500">
          <option>Công nghệ thông tin</option>
          <option>Điện tử - Viễn thông</option>
          <option>Kinh tế số</option>
        </select>
      </div>

      <!-- Giảng viên hướng dẫn -->
    <div>
    <label class="block mb-1 font-medium">Giảng viên hướng dẫn</label>
    <input type="text" id="teacherInput" class="w-full border rounded px-3 py-2" placeholder="Tìm giảng viên..." />
    <ul id="teacherSuggestions" class="border rounded mt-1 bg-white shadow max-h-40 overflow-y-auto hidden z-10"></ul>

    <div id="selectedTeachers" class="flex flex-wrap gap-2 mt-2">
        <!-- Thẻ giảng viên sẽ được thêm ở đây -->
    </div>
    </div>


      <!-- Mô tả đề tài -->
      <div class="col-span-full">
        <label class="block text-sm font-medium text-gray-700 mb-1">Mô tả đề tài</label>
        <textarea class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring focus:ring-blue-500" rows="3"></textarea>
      </div>

      <!-- Trạng thái -->
      <div class="col-span-full">
        <label class="block text-sm font-medium text-gray-700 mb-1">Trạng thái</label>
        <select class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring focus:ring-blue-500">
          <option>Chưa bắt đầu</option>
          <option>Đang thực hiện</option>
          <option>Hoàn thành</option>
        </select>
      </div>

      <!-- Nút hành động -->
      <div class="col-span-full flex justify-end gap-3 pt-4">
        <button type="button" onclick="closeModal()" class="px-4 py-2 rounded-lg bg-gray-100 text-gray-700 hover:bg-gray-200">Huỷ</button>
        <button type="submit" class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700">Lưu</button>
      </div>
    </form>
  </div>
</div>

<!-- Script điều khiển Modal -->
<script>
  const modal = document.getElementById("addProjectModal");
  const addButton = document.querySelector(".bg-green-600");

  addButton.addEventListener("click", () => {
    modal.classList.remove("hidden");
    modal.classList.add("flex");
  });

  function closeModal() {
    modal.classList.add("hidden");
    modal.classList.remove("flex");
  }

  document.getElementById("addProjectForm").addEventListener("submit", (e) => {
    e.preventDefault();
    alert("Đã lưu đồ án (demo)!");
    closeModal();
  });
</script>

<!-- Optional Animation Tailwind -->
<style>
  .animate-fade-in {
    animation: fadeIn 0.25s ease-out;
  }

  @keyframes fadeIn {
    from { transform: scale(0.95); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
  }
</style>


  </main>
</div>

</html>
